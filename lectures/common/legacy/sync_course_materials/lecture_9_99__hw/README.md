# Домашнее задание: Разработка CRUD-сервиса с CI/CD
В этом задании вы должны будете написать небольшой сервис и настроить в нем CI/CD.

#### Для выполнения ДЗ вам потребуется

1) Новый, чистый репозиторий отдельно под эту домашку.
 Необходимо сделать его приватным и выдать доступы для преподавателей и менторов с уровнем доступа maintainer. Никому другому доступы давать нельзя. Список преподов и менторов ищи в ридми в корне репозитория.
2) Виртуальная машина, чтобы на нее задеплоить ваш код (сервер в интернете).
Если у вас есть своя виртуалка и вы хотите ее использовать, вы можете так сделать.
В ином случае нужно обратиться к Антону Чумакову, чтобы вам выдали виртуалку на время решения этой домашки.

#### Требования к ДЗ

1) Нужно написать CRUD (аббревиатура от Create Read Update Delete) приложение: небольшое хранилище заметок (требования к нему - ниже)
2) Написать тесты на ваше приложение (требуемое покрытие > 10%)
3) Настроить CI/CD

Будет проверяться:

* Доступность вашелго приложения по сети Интернет
* Работоспособность приложения согласно требованиям
* Настройка 4 джоб в CI: lint (гоняет линтеры по вашему коду), test (гоняет по вашему коду тесты и проверяет, что они успешно проходят), build (собирает бинарник), deploy (отправляет новую версию бинарника на виртуалку и запускает его там)
* Персональная конфигурация линтеров. По умолчанию в golangci-lint v2 использовано несколько линтеров. Создайте свой конфигурационный файл, и включите помимо дефолтных,
еще 15 наиболее полезных на ваш взгляд линтеров (полный список линтеров тут <https://golangci-lint.run/usage/linters/>)
* Наличие разных этапов для разных событий в репозитории. При мерже/пуше в мастер должна срабатывать 4ая джоба: deploy, которая будет раскладывать ваше приложение на сервер. Остальные три джобы должны срабатывать не только при мердже в мастер, но и при создании нового Merge Request или добавлении новых коммитов к существующему
* Наличие индикатора покрытия тестами. Должен быть добавлен процент покрытия тестами в интерфейсе (gitlab
https://docs.gitlab.com/ci/testing/code_coverage/?tab=Go, https://docs.gitlab.com/user/project/badges/)

#### Требования к приложению

Приложение сделать небольшое и несложное, основная задача ДЗ будет именно в CI/CD.
Хранить данные можно в памяти.

Оперировать нужно сущностью Note с полями:

* ID - число, инкрементальный ID
* Text - строка, текст заметки
* CreatedAt - время создания (изменяется только бекендом, с клиента не передаем)
* UpdatedAt - время последнего обновления (изменяется только бекендом, с клиента не передаем)

Ваше приложение должно принимать и отвечать только в json формате. Требуемая сигнатура API приложения:

* GET /note/{id} - получить Note по id
* POST /note  - создать Note
* PUT /note/{id} - обновить Note по id
* DELETE /note/{id} - удаляем Note по id
* GET /note - получить список Note, запрос должен уметь обрабатывать query-параметр: order_by("id","text","created_at","updated_at"), который указывает, что перед отдачей список нужно отсортировать по такому-то полю по возрастанию значения

#### Задание со звездочкой

1. В GitLab CI обносить build джобу, чтобы в результате получался не бинарник, а docker образ, в который помещен бинарник приложения и этот образ сохранялся в хранилище образов (либо GitLab, либо Docker Hub)
2. Обновить шаг deploy, чтобы в нем не бинарник заливался на сервер, а новая версия образа pull-илась на сервер и там бы рестартовался контейнер
